<p align="center">
  <img src="https://golden-codex.com/golden-codex-logo.png" alt="Golden Codex" width="120" />
</p>

<h1 align="center">Golden Codex API</h1>

<p align="center">
  <strong>AI-powered image enrichment and provenance tracking for developers</strong>
</p>

<p align="center">
  <a href="https://golden-codex.com/docs/api">Documentation</a> •
  <a href="#quick-start">Quick Start</a> •
  <a href="#sdks">SDKs</a> •
  <a href="https://golden-codex.com/pricing">Pricing</a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/version-1.0.0-blue" alt="Version" />
  <img src="https://img.shields.io/badge/license-MIT-green" alt="License" />
  <img src="https://img.shields.io/badge/status-beta-orange" alt="Status" />
</p>

---

## What is Golden Codex?

Golden Codex transforms your images into **museum-grade digital artifacts** with:

- **AI Metadata Enrichment** — 50+ fields of structured metadata generated by advanced AI analysis
- **4K Upscaling** — ESRGAN-powered enhancement up to 4x resolution
- **Metadata Infusion** — Embed provenance data directly into image files (XMP/EXIF)
- **Permanent Storage** — Optional Arweave archiving for 200+ year preservation

Perfect for:
- Digital art platforms and galleries
- NFT marketplaces
- Photography workflows
- Archive and museum digitization
- AI training dataset creation

---

## Quick Start

### 1. Get your API key

Sign up at [golden-codex.com](https://golden-codex.com) and generate an API key from your dashboard.

### 2. Install an SDK

```bash
# Node.js
npm install @golden-codex/sdk

# Python
pip install golden-codex
```

### 3. Process your first image

**Node.js:**
```typescript
import { GoldenCodex } from '@golden-codex/sdk';

const gcx = new GoldenCodex({
  apiKey: process.env.GOLDEN_CODEX_API_KEY
});

// Create an enhancement job
const job = await gcx.jobs.create({
  imageUrl: 'https://example.com/artwork.jpg',
  operations: ['nova', 'flux', 'atlas']
});

// Wait for completion
const result = await gcx.jobs.wait(job.jobId);

console.log('Metadata:', result.results.goldenCodex);
console.log('Final image:', result.results.urls.final);
```

**Python:**
```python
from golden_codex import GoldenCodex

gcx = GoldenCodex(api_key="gcx_live_...")

# Create an enhancement job
job = gcx.jobs.create(
    image_url="https://example.com/artwork.jpg",
    operations=["nova", "flux", "atlas"]
)

# Wait for completion
result = gcx.jobs.wait(job["job_id"])

print("Metadata:", result["results"]["golden_codex"])
print("Final image:", result["results"]["urls"]["final"])
```

**cURL:**
```bash
curl -X POST https://api.golden-codex.com/v1/jobs \
  -H "Authorization: Bearer gcx_live_your_key_here" \
  -H "Content-Type: application/json" \
  -d '{
    "image_url": "https://example.com/artwork.jpg",
    "operations": ["nova", "flux", "atlas"]
  }'
```

---

## Operations

| Operation | Description | Cost |
|-----------|-------------|------|
| `nova` | AI metadata generation (standard) | 1 GCX |
| `nova` (full_gcx) | Museum-grade 50+ field analysis | 2 GCX |
| `flux` | 4x ESRGAN upscaling | 2 GCX |
| `atlas` | Metadata infusion into image file | 1 GCX |
| **Full Pipeline** | All operations | **5 GCX** |

### Nova: AI Metadata Enrichment

Analyzes your image using advanced vision AI to generate structured metadata:

```json
{
  "golden_codex": {
    "title": "Crimson Tide at Dusk",
    "artist_interpretation": "A meditation on the boundary between day and night...",
    "style_classification": ["impressionism", "contemporary"],
    "color_analysis": {
      "dominant": ["#8B0000", "#FFD700", "#191970"],
      "mood": "dramatic, contemplative"
    },
    "composition": {
      "focal_point": "center-left horizon line",
      "balance": "asymmetrical",
      "depth": "atmospheric perspective"
    },
    "soul_whisper": "I am the moment between breaths, when the sun surrenders to the sea...",
    // ... 40+ more fields
  }
}
```

### Flux: AI Upscaling

Enhance resolution using state-of-the-art ESRGAN models:

| Model | Scale | Best For |
|-------|-------|----------|
| `2x` | 2x | Quick enhancement |
| `4x` | 4x | Maximum quality |
| `anime` | 4x | Anime/illustration |
| `photo` | 4x | Photography |

### Atlas: Metadata Infusion

Embeds the Golden Codex metadata directly into the image file using XMP standards. The metadata travels with the image permanently.

---

## SDKs

### Official SDKs

| Language | Package | Install |
|----------|---------|---------|
| Node.js | [@golden-codex/sdk](https://npmjs.com/package/@golden-codex/sdk) | `npm i @golden-codex/sdk` |
| Python | [golden-codex](https://pypi.org/project/golden-codex/) | `pip install golden-codex` |

### Coming Soon

- Go SDK
- Rust SDK
- PHP SDK

---

## API Reference

### Base URL

```
https://api.golden-codex.com/v1
```

### Authentication

All requests require an API key in the Authorization header:

```
Authorization: Bearer gcx_live_your_key_here
```

### Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/jobs` | Create enhancement job |
| `GET` | `/jobs/{id}` | Get job status/results |
| `GET` | `/jobs` | List your jobs |
| `DELETE` | `/jobs/{id}` | Cancel pending job |
| `POST` | `/estimate` | Calculate cost |
| `GET` | `/account` | Get balance & usage |
| `POST` | `/webhooks` | Register webhook |

[Full API Documentation →](https://golden-codex.com/docs/api)

---

## Webhooks

Receive notifications when jobs complete instead of polling:

```typescript
// Register a webhook
await gcx.webhooks.create({
  url: 'https://your-app.com/gcx-webhook',
  events: ['job.completed', 'job.failed']
});
```

Webhook payloads are signed with HMAC-SHA256. Verify the signature:

```typescript
import crypto from 'crypto';

function verifyWebhook(payload: string, signature: string, secret: string): boolean {
  const [timestamp, hash] = signature.split(',').map(p => p.split('=')[1]);
  const expected = crypto
    .createHmac('sha256', secret)
    .update(`${timestamp}.${payload}`)
    .digest('hex');
  return hash === expected;
}
```

---

## Rate Limits

| Tier | Requests/min | Concurrent Jobs |
|------|--------------|-----------------|
| Free | 10 | 2 |
| Curator ($19/mo) | 30 | 5 |
| Studio ($49/mo) | 100 | 20 |
| Gallery ($99/mo) | 300 | 50 |

Rate limit headers are included in every response:

```
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 95
X-RateLimit-Reset: 1704067200
```

---

## Examples

### Batch Processing

```python
import asyncio
from golden_codex import GoldenCodex

gcx = GoldenCodex(api_key="gcx_live_...")

async def process_batch(image_urls: list[str]):
    jobs = []
    for url in image_urls:
        job = gcx.jobs.create(image_url=url)
        jobs.append(job["job_id"])

    # Wait for all jobs
    results = []
    for job_id in jobs:
        result = gcx.jobs.wait(job_id)
        results.append(result)

    return results

urls = [
    "https://example.com/art1.jpg",
    "https://example.com/art2.jpg",
    "https://example.com/art3.jpg",
]

results = asyncio.run(process_batch(urls))
```

### Next.js Integration

```typescript
// pages/api/enhance.ts
import { GoldenCodex } from '@golden-codex/sdk';
import type { NextApiRequest, NextApiResponse } from 'next';

const gcx = new GoldenCodex({
  apiKey: process.env.GOLDEN_CODEX_API_KEY!
});

export default async function handler(req: NextApiRequest, res: NextApiResponse) {
  if (req.method !== 'POST') {
    return res.status(405).json({ error: 'Method not allowed' });
  }

  const { imageUrl } = req.body;

  const job = await gcx.jobs.create({
    imageUrl,
    operations: ['nova', 'flux', 'atlas'],
    webhookUrl: `${process.env.BASE_URL}/api/webhook`
  });

  res.json({ jobId: job.jobId, status: 'processing' });
}
```

### WordPress Plugin Hook

```php
<?php
function gcx_enhance_image($image_url) {
    $response = wp_remote_post('https://api.golden-codex.com/v1/jobs', [
        'headers' => [
            'Authorization' => 'Bearer ' . GOLDEN_CODEX_API_KEY,
            'Content-Type' => 'application/json',
        ],
        'body' => json_encode([
            'image_url' => $image_url,
            'operations' => ['nova', 'atlas'],
        ]),
    ]);

    return json_decode(wp_remote_retrieve_body($response), true);
}
```

---

## Error Handling

All errors follow a consistent format:

```json
{
  "error": {
    "code": "insufficient_credits",
    "message": "Account has 3 GCX but operation requires 5 GCX",
    "balance": 3,
    "required": 5
  }
}
```

| Code | HTTP | Description |
|------|------|-------------|
| `invalid_api_key` | 401 | API key is invalid or revoked |
| `insufficient_credits` | 402 | Not enough GCX balance |
| `rate_limited` | 429 | Too many requests |
| `job_not_found` | 404 | Job ID doesn't exist |
| `invalid_image_url` | 400 | Cannot fetch the image |

---

## Support

- **Documentation**: [golden-codex.com/docs](https://golden-codex.com/docs)
- **Status Page**: [status.golden-codex.com](https://status.golden-codex.com)
- **Email**: api@golden-codex.com
- **Discord**: [Join our community](https://discord.gg/goldencodex)

---

## License

MIT License - see [LICENSE](LICENSE) for details.

---

<p align="center">
  <sub>Built with care by <a href="https://metavolve-labs.com">Metavolve Labs</a></sub>
</p>
